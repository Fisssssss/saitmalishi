<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Весёлые раскраски для малышей | Развивающие игры</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
<style>
  /* Общие переменные */
  :root {
    --primary-color: #FF6B6B;
    --secondary-color: #4CAF50;
    --accent-color: #4A90E2;
    --light-bg: #F9F9F9;
    --card-bg: #FFFFFF;
    --text-color: #333333;
    --text-light: #666666;
  }

  /* Общие сбросы */
  * {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
  }

  body {
    font-family: 'Comic Sans MS', 'Arial Rounded MT Bold', sans-serif;
    line-height: 1.6;
    color: var(--text-color);
    background-color: var(--light-bg);
    display: flex;
    flex-direction: column;
    min-height: 100vh;
  }

  .container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 20px;
    flex: 1;
  }

  /* Шапка сайта */
  header {
    background: linear-gradient(135deg, #FF9A9E 0%, #FAD0C4 100%);
    padding: 40px 0;
    text-align: center;
    color: white;
    position: relative;
    overflow: hidden;
  }
  
  header::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="none"><path fill="rgba(255,255,255,0.1)" d="M0,0 L100,0 L100,100 Q50,80 0,100 Z"></path></svg>');
    background-size: 100% 100%;
    background-repeat: no-repeat;
    background-position: bottom;
    z-index: 1;
  }
  
  header .container {
    position: relative;
    z-index: 2;
  }
  
  h1 {
    font-size: 2.8rem;
    margin-bottom: 20px;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
  }
  
  .subtitle {
    font-size: 1.3rem;
    max-width: 800px;
    margin: 0 auto 30px;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
  }

  .back-button {
    position: absolute;
    top: 20px;
    left: 20px;
    padding: 10px 15px;
    background-color: var(--accent-color);
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    font-size: 16px;
    transition: background-color 0.3s;
    z-index: 10;
    display: flex;
    align-items: center;
    gap: 5px;
  }
  
  .back-button:hover {
    background-color: #357ABD;
  }

  /* Основное содержимое */
  main {
    flex: 1;
  }

  /* Футер */
  footer {
    background-color: #333;
    color: white;
    padding: 40px 0 20px;
    text-align: center;
    margin-top: auto;
  }
  
  .footer-links {
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
    gap: 20px;
    margin-bottom: 30px;
  }
  
  .footer-links a {
    color: white;
    text-decoration: none;
    transition: color 0.3s;
  }
  
  .footer-links a:hover {
    color: var(--secondary-color);
  }
  
  .social-icons {
    margin-bottom: 30px;
  }
  
  .social-icons a {
    color: white;
    font-size: 1.5rem;
    margin: 0 10px;
    transition: color 0.3s;
  }
  
  .social-icons a:hover {
    color: var(--accent-color);
  }
  
  .copyright {
    color: rgba(255,255,255,0.7);
    font-size: 0.9rem;
  }

  /* Стиль для страницы сортировки */
  .sort-section {
    max-width: 1200px;
    margin: 40px auto;
    padding: 0 20px;
  }

  .sort-header {
    text-align: center;
    margin-bottom: 20px;
  }

  .sort-header h1 {
    font-size: 2.8rem;
    margin-bottom: 10px;
    color: var(--primary-color);
  }

  /* Стиль для игры с сортировкой */
  .game-container {
    max-width: 900px;
    margin: 0 auto;
    background-color: var(--card-bg);
    border-radius: 20px;
    padding: 30px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.1);
  }

  /* Внутренние элементы сортировки */
  .level-info {
    font-size: 18px;
    margin-bottom: 20px;
    font-weight: bold;
    text-align: center;
    color: var(--text-color);
  }

  .items-container {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 20px;
    margin-bottom: 30px;
    min-height: 120px;
  }

  .item {
    width: 80px;
    height: 80px;
    border-radius: 15px;
    cursor: grab;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 40px;
    user-select: none;
    box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    transition: transform 0.2s;
    position: relative;
  }

  .item:hover {
    transform: scale(1.1);
  }

  .item-count {
    position: absolute;
    bottom: 5px;
    right: 5px;
    background-color: rgba(0,0,0,0.3);
    color: white;
    border-radius: 50%;
    width: 20px;
    height: 20px;
    font-size: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .baskets-container {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 25px;
    margin-bottom: 20px;
  }

  .basket {
    width: 120px;
    height: 140px;
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path d="M20,30 L80,30 L75,90 L25,90 Z" fill="white" opacity="0.3"/><path d="M30,30 L35,10 L65,10 L70,30" fill="white" opacity="0.3"/></svg>');
    background-repeat: no-repeat;
    background-position: center 30px;
    background-size: 80px;
    border-radius: 10px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-end;
    padding-bottom: 15px;
    cursor: pointer;
    box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    position: relative;
    overflow: hidden;
  }

  .basket-color {
    width: 100%;
    height: 30px;
    border-radius: 0 0 10px 10px;
  }

  .basket-label {
    font-weight: bold;
    color: white;
    text-shadow: 1px 1px 1px rgba(0,0,0,0.5);
    margin-top: 10px;
    background-color: rgba(0,0,0,0.3);
    padding: 2px 10px;
    border-radius: 10px;
  }

  .basket-count {
    position: absolute;
    top: 10px;
    right: 10px;
    background-color: rgba(0,0,0,0.5);
    color: white;
    border-radius: 50%;
    width: 24px;
    height: 24px;
    font-size: 14px;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  button.game-btn {
    padding: 12px 25px;
    background-color: var(--secondary-color);
    color: white;
    border: none;
    border-radius: 10px;
    font-size: 18px;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.3s;
    margin-top: 20px;
    width: 100%;
    max-width: 200px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.2);
  }

  button.game-btn:hover {
    background-color: #3d8b40;
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0,0,0,0.3);
  }

  /* Общие медиа для адаптивности */
  @media(max-width:768px){
    .item { width: 60px; height: 60px; font-size: 30px; }
    .basket { width: 100px; height: 120px; }
    button.game-btn { max-width: 150px; font-size: 16px; }
  }
  
  @media (max-width: 768px) {
    h1 {
      font-size: 2.2rem;
    }
    
    .subtitle {
      font-size: 1.1rem;
    }
  }
</style>
</head>
<body>
<!-- Шапка сайта -->
<header>
  <button class="back-button" onclick="window.location.href='index.html'">
    <i class="fas fa-arrow-left"></i> На главную
  </button>
  <div class="container">
    <h1>Цветная сортировка</h1>
    <p class="subtitle">Весёлая игра для развития логики и цветового восприятия</p>
  </div>
</header>

<!-- Основное содержимое -->
<main>
  <div class="sort-section">
    <div class="game-container">
      <div class="level-info">Уровень: <span id="level">1</span> | Предметов: <span id="itemCount">5</span></div>
      <div class="items-container" id="itemsContainer"></div>
      <div class="baskets-container" id="basketsContainer"></div>
      <div style="text-align: center; margin-top: 20px;">
        <button id="newGameBtn" class="game-btn">Новая игра</button>
        <button id="continueBtn" class="game-btn" style="display:none;">Продолжить</button>
      </div>
    </div>
  </div>
</main>

<!-- Футер -->
<footer>
  <div class="container">
    <div class="footer-links">
      <a href="#">О нас</a>
      <a href="#">Все игры</a>
      <a href="#">Блог</a>
      <a href="#">Контакты</a>
      <a href="#">Политика конфиденциальности</a>
    </div>
    
    <div class="social-icons">
      <a href="#"><i class="fab fa-vk"></i></a>
      <a href="#"><i class="fab fa-telegram"></i></a>
      <a href="#"><i class="fab fa-instagram"></i></a>
      <a href="#"><i class="fab fa-youtube"></i></a>
    </div>
    
    <p class="copyright">© 2023 Развивающие игры для малышей. Все права защищены.</p>
  </div>
</footer>

<!-- Скрипты для сортировки -->
<script>
  const itemsContainer = document.getElementById('itemsContainer');
  const basketsContainer = document.getElementById('basketsContainer');
  const newGameBtn = document.getElementById('newGameBtn');
  const continueBtn = document.getElementById('continueBtn');
  const levelDisplay = document.getElementById('level');
  const itemCountDisplay = document.getElementById('itemCount');

  const successSound = new Audio('https://assets.mixkit.co/sfx/preview/mixkit-correct-answer-tone-2870.mp3');
  const errorSound = new Audio('https://assets.mixkit.co/sfx/preview/mixkit-wrong-answer-fail-notification-946.mp3');

  const itemSymbols = ['😊', '🐶', '🐱', '🌸', '🌻', '🍎', '🍒', '⭐', '🌈', '🦋', '🐝', '🐢', '🐙', '🦄', '🍄', '🌷', '🍀', '🐳', '🦉', '🐿️'];

  let currentLevel = 1;
  let itemsCount = 5;
  let colorGroups = [];
  let items = [];
  let baskets = [];
  let draggedItem = null;

  function getRandomColor() {
    const letters = '0123456789ABCDEF';
    let color = '#';
    for (let i=0; i<6; i++) {
      color += letters[Math.floor(Math.random()*16)];
    }
    return color;
  }

  function initGame() {
    itemsContainer.innerHTML = '';
    basketsContainer.innerHTML = '';
    colorGroups = [];
    items = [];
    baskets = [];

    const colorsCount = Math.min(Math.max(3, Math.floor(itemsCount/2)), 5);
    for (let i=0; i<colorsCount; i++) {
      let color;
      do {
        color = getRandomColor();
      } while (colorGroups.some(g => g.color===color));

      const groupSize = Math.max(1, Math.floor(Math.random()*(currentLevel+2)));
      colorGroups.push({ color, count: groupSize, collected: 0 });
    }

    itemsCount = colorGroups.reduce((sum,g) => sum+g.count, 0);
    itemCountDisplay.textContent = itemsCount;
    document.getElementById('level').textContent = currentLevel;

    // Создаем предметы
    colorGroups.forEach(group => {
      for (let i=0; i<group.count; i++) {
        const item = document.createElement('div');
        item.className = 'item';
        item.style.backgroundColor = group.color;
        item.textContent = itemSymbols[Math.floor(Math.random()*itemSymbols.length)];
        item.draggable = true;
        item.dataset.color = group.color;

        if (group.count >1) {
          const badge = document.createElement('div');
          badge.className='item-count';
          badge.textContent=group.count;
          item.appendChild(badge);
        }

        item.addEventListener('dragstart', e => {
          draggedItem = item;
          setTimeout(()=>{item.style.visibility='hidden';},0);
          e.dataTransfer.setData('text/plain', item.dataset.color);
        });
        item.addEventListener('dragend', ()=> {
          if(draggedItem) draggedItem.style.visibility='visible';
        });
        items.push(item);
        itemsContainer.appendChild(item);
      }
    });

    // Перемешиваем
    shuffleArray(items);

    // Создаем корзинки
    colorGroups.forEach(group => {
      const basket = document.createElement('div');
      basket.className='basket';
      basket.dataset.color=group.color;
      basket.dataset.expected=group.count;
      basket.dataset.collected=0;

      const colorDiv = document.createElement('div');
      colorDiv.className='basket-color';
      colorDiv.style.backgroundColor=group.color;

      const labelDiv = document.createElement('div');
      labelDiv.className='basket-label';
      labelDiv.textContent='Корзинка';

      const countBadge = document.createElement('div');
      countBadge.className='basket-count';
      countBadge.textContent='0/'+group.count;
      basket.countBadge = countBadge;

      basket.appendChild(colorDiv);
      basket.appendChild(labelDiv);
      basket.appendChild(countBadge);

      basket.addEventListener('dragover', e => e.preventDefault());
      basket.addEventListener('drop', e => {
        e.preventDefault();
        if(draggedItem && draggedItem.dataset.color===basket.dataset.color){
          let col = parseInt(basket.dataset.collected)+1;
          basket.dataset.collected=col;
          basket.countBadge.textContent=col+'/'+group.count;
          if(col >= group.count) {
            basket.countBadge.style.backgroundColor='#4CAF50';
          }
          successSound.play();
          draggedItem.style.display='none';
          items = items.filter(i => i!==draggedItem);
          checkLevelComplete();
        } else {
          errorSound.play();
          // Можно добавить анимацию возврата
        }
      });
      baskets.push(basket);
      basketsContainer.appendChild(basket);
    });

    continueBtn.style.display='none';
  }

  function shuffleArray(array){
    for(let i=array.length-1; i>0; i--) {
      const j=Math.floor(Math.random()*(i+1));
      [array[i], array[j]]=[array[j], array[i]];
    }
  }

  function checkLevelComplete() {
    if(items.length===0) {
      document.getElementById('continueBtn').style.display='inline-block';
    }
  }

  document.getElementById('newGameBtn').addEventListener('click', ()=> {
    currentLevel=1;
    itemsCount=5;
    initGame();
  });

  document.getElementById('continueBtn').addEventListener('click', ()=> {
    currentLevel++;
    itemsCount+=5;
    initGame();
  });

  // Инициализация
  window.addEventListener('load', initGame);
</script>
</body>
</html>