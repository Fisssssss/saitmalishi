<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ì–µ–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–∏–π —Å–æ—Ä—Ç–µ—Ä | –†–∞–∑–≤–∏–≤–∞—é—â–∏–µ –∏–≥—Ä—ã –¥–ª—è –º–∞–ª—ã—à–µ–π</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        :root {
            --primary-color: #FF6B6B;
            --secondary-color: #4CAF50;
            --accent-color: #4A90E2;
            --light-bg: #F9F9F9;
            --card-bg: #FFFFFF;
            --text-color: #333333;
            --text-light: #666666;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Comic Sans MS', 'Arial Rounded MT Bold', sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: var(--light-bg);
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            flex: 1;
        }
        
        /* –®–∞–ø–∫–∞ */
        header {
            background: linear-gradient(135deg, #FF9A9E 0%, #FAD0C4 100%);
            padding: 40px 0;
            text-align: center;
            color: white;
            position: relative;
            overflow: hidden;
        }
        
        header::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="none"><path fill="rgba(255,255,255,0.1)" d="M0,0 L100,0 L100,100 Q50,80 0,100 Z"></path></svg>');
            background-size: 100% 100%;
            background-repeat: no-repeat;
            background-position: bottom;
            z-index: 1;
        }
        
        header .container {
            position: relative;
            z-index: 2;
        }
        
        h1 {
            font-size: 2.8rem;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }
        
        .subtitle {
            font-size: 1.3rem;
            max-width: 800px;
            margin: 0 auto 30px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
        }
        
        .back-button {
            position: absolute;
            top: 20px;
            left: 20px;
            padding: 10px 15px;
            background-color: var(--accent-color);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s;
            z-index: 10;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .back-button:hover {
            background-color: #357ABD;
        }
        
        /* –û—Å–Ω–æ–≤–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∏–≥—Ä—ã */
        .game-content {
            padding: 40px 0;
        }
        
        .game-header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .game-title {
            color: var(--primary-color);
            font-size: 2.5rem;
            margin-bottom: 15px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }
        
        .game-description {
            color: var(--text-light);
            font-size: 1.1rem;
            max-width: 600px;
            margin: 0 auto 20px;
        }
        
        .level-selector {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 30px;
        }
        
        .level-btn {
            padding: 10px 20px;
            background-color: white;
            color: var(--accent-color);
            border: 2px solid var(--accent-color);
            border-radius: 50px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
        }
        
        .level-btn:hover, .level-btn.active {
            background-color: var(--accent-color);
            color: white;
        }
        
        .level-btn.locked {
            background-color: #e0e0e0;
            color: #9e9e9e;
            border-color: #e0e0e0;
            cursor: not-allowed;
        }
        
        .level-btn.locked::after {
            content: "üîí";
            position: absolute;
            right: 5px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 12px;
        }
        
        .game-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 30px;
            margin-bottom: 30px;
        }
        
        .shapes-container, .slots-container {
            background-color: var(--card-bg);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            min-width: 320px;
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        .shapes-container:hover, .slots-container:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.15);
        }
        
        .shape {
            width: 90px;
            height: 90px;
            background-color: #f5f9ff;
            border-radius: 15px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: grab;
            transition: all 0.3s;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }
        
        .shape:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(0,0,0,0.15);
        }
        
        .shape svg {
            width: 55px;
            height: 55px;
            fill: currentColor;
        }
        
        .shape.dragging {
            opacity: 0.8;
            transform: scale(1.1);
            box-shadow: 0 8px 20px rgba(0,0,0,0.2);
            z-index: 10;
        }
        
        .slot {
            width: 100px;
            height: 100px;
            border: 3px dashed #b3d4ff;
            border-radius: 15px;
            background-color: #f5f9ff;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: all 0.3s;
            position: relative;
        }
        
        .slot::after {
            content: attr(data-shape-name);
            position: absolute;
            bottom: -25px;
            left: 0;
            right: 0;
            text-align: center;
            font-size: 13px;
            color: var(--accent-color);
            font-weight: bold;
        }
        
        .slot.highlight {
            border-color: #FF9A9E;
            background-color: #fff0f0;
            box-shadow: 0 0 15px rgba(255, 154, 158, 0.3);
        }
        
        .slot.correct {
            border-color: var(--secondary-color);
            background-color: #e8f5e9;
            box-shadow: 0 0 15px rgba(76, 175, 80, 0.3);
            animation: bounce 0.5s;
        }
        
        .slot.incorrect {
            border-color: #ff6b6b;
            background-color: #ffebee;
            animation: shake 0.5s;
            box-shadow: 0 0 15px rgba(255, 107, 107, 0.3);
        }
        
        .message {
            background-color: var(--secondary-color);
            color: white;
            padding: 20px 30px;
            border-radius: 15px;
            font-size: 1.2rem;
            text-align: center;
            max-width: 600px;
            margin: 20px auto;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.5s;
            box-shadow: 0 5px 20px rgba(76, 175, 80, 0.3);
        }
        
        .message.show {
            opacity: 1;
            transform: translateY(0);
        }
        
        .controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 30px;
        }
        
        .game-btn {
            padding: 15px 30px;
            border: none;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .btn-primary {
            background-color: var(--accent-color);
            color: white;
        }
        
        .btn-primary:hover {
            background-color: #3a7bc8;
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(58, 123, 200, 0.3);
        }
        
        .btn-reset {
            background-color: var(--primary-color);
            color: white;
        }
        
        .btn-reset:hover {
            background-color: #ff5252;
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(255, 82, 82, 0.3);
        }
        
        /* –§—É—Ç–µ—Ä */
        footer {
            background-color: #333;
            color: white;
            padding: 40px 0 20px;
            text-align: center;
            margin-top: auto;
        }
        
        .footer-links {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .footer-links a {
            color: white;
            text-decoration: none;
            transition: color 0.3s;
        }
        
        .footer-links a:hover {
            color: var(--secondary-color);
        }
        
        .social-icons {
            margin-bottom: 30px;
        }
        
        .social-icons a {
            color: white;
            font-size: 1.5rem;
            margin: 0 10px;
            transition: color 0.3s;
        }
        
        .social-icons a:hover {
            color: var(--accent-color);
        }
        
        .copyright {
            color: rgba(255,255,255,0.7);
            font-size: 0.9rem;
        }
        
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            20%, 60% { transform: translateX(-5px); }
            40%, 80% { transform: translateX(5px); }
        }
        
        @media (max-width: 768px) {
            h1 {
                font-size: 2.2rem;
            }
            
            .subtitle {
                font-size: 1.1rem;
            }
            
            .game-container {
                flex-direction: column;
                align-items: center;
            }
            
            .shapes-container, .slots-container {
                grid-template-columns: repeat(2, 1fr);
                width: 100%;
            }
            
            .shape {
                width: 80px;
                height: 80px;
            }
            
            .slot {
                width: 90px;
                height: 90px;
            }
            
            .shape svg {
                width: 45px;
                height: 45px;
            }
        }
    </style>
</head>
<body>
    <!-- –®–∞–ø–∫–∞ -->
    <header>
        <button class="back-button" onclick="window.location.href='index.html'">
            <i class="fas fa-arrow-left"></i> –ù–∞ –≥–ª–∞–≤–Ω—É—é
        </button>
        <div class="container">
            <h1>–ì–µ–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–∏–π —Å–æ—Ä—Ç–µ—Ä</h1>
            <p class="subtitle">–†–∞–∑–≤–∏–≤–∞–µ–º –ª–æ–≥–∏–∫—É –∏ –º–µ–ª–∫—É—é –º–æ—Ç–æ—Ä–∏–∫—É, –∏–∑—É—á–∞—è –≥–µ–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–∏–µ —Ñ–∏–≥—É—Ä—ã</p>
        </div>
    </header>
    
    <!-- –û—Å–Ω–æ–≤–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ -->
    <div class="game-content">
        <div class="container">
            <div class="game-header">
                <h1 class="game-title">üî∑ –ì–µ–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–∏–π —Å–æ—Ä—Ç–µ—Ä üî∑</h1>
                <p class="game-description" id="levelDescription">–í—ã–±–µ—Ä–∏ —É—Ä–æ–≤–µ–Ω—å –∏ —Ä–∞—Å—Å—Ç–∞–≤—å –≤—Å–µ —Ñ–∏–≥—É—Ä—ã –Ω–∞ —Å–≤–æ–∏ –º–µ—Å—Ç–∞!</p>
                
                <div class="level-selector" id="levelSelector">
                    <!-- –ö–Ω–æ–ø–∫–∏ —É—Ä–æ–≤–Ω–µ–π –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
                </div>
            </div>
            
            <div class="game-container">
                <div class="shapes-container" id="shapes"></div>
                <div class="slots-container" id="slots"></div>
            </div>
            
            <div class="message" id="message">
                –û—Ç–ª–∏—á–Ω–æ! –¢—ã —Å–ø—Ä–∞–≤–∏–ª—Å—è! üéâ<br>
                <span id="levelCompleteText"></span>
            </div>
            
            <div class="controls">
                <button class="game-btn btn-reset" id="resetBtn">
                    <i class="fas fa-redo"></i> –ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ
                </button>
                <button class="game-btn btn-primary" id="nextLevelBtn" disabled>
                    <i class="fas fa-arrow-right"></i> –°–ª–µ–¥—É—é—â–∏–π —É—Ä–æ–≤–µ–Ω—å
                </button>
            </div>
        </div>
    </div>

    <!-- –§—É—Ç–µ—Ä -->
    <footer>
        <div class="container">
            <div class="footer-links">
                <a href="#">–û –Ω–∞—Å</a>
                <a href="#">–í—Å–µ –∏–≥—Ä—ã</a>
                <a href="#">–ë–ª–æ–≥</a>
                <a href="#">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a>
                <a href="#">–ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</a>
            </div>
            
            <div class="social-icons">
                <a href="#"><i class="fab fa-vk"></i></a>
                <a href="#"><i class="fab fa-telegram"></i></a>
                <a href="#"><i class="fab fa-instagram"></i></a>
                <a href="#"><i class="fab fa-youtube"></i></a>
            </div>
            
            <p class="copyright">¬© 2023 –†–∞–∑–≤–∏–≤–∞—é—â–∏–µ –∏–≥—Ä—ã –¥–ª—è –º–∞–ª—ã—à–µ–π. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
        </div>
    </footer>

    <!-- –ê—É–¥–∏–æ —ç–ª–µ–º–µ–Ω—Ç—ã -->
    <audio id="successSound" src="https://assets.mixkit.co/sfx/preview/mixkit-achievement-bell-600.mp3" preload="auto"></audio>
    <audio id="winSound" src="https://assets.mixkit.co/sfx/preview/mixkit-winning-chimes-2015.mp3" preload="auto"></audio>
    <audio id="errorSound" src="https://assets.mixkit.co/sfx/preview/mixkit-wrong-answer-fail-notification-946.mp3" preload="auto"></audio>
    <audio id="dropSound" src="https://assets.mixkit.co/sfx/preview/mixkit-arcade-game-jump-coin-216.mp3" preload="auto"></audio>
    
    <script>
        // SVG —Ñ–∏–≥—É—Ä—ã —Å —Ä–∞–∑–Ω—ã–º–∏ —Ü–≤–µ—Ç–∞–º–∏
        const shapeSVGs = {
            'triangle': '<svg viewBox="0 0 100 100"><polygon points="50,10 90,90 10,90" /></svg>',
            'circle': '<svg viewBox="0 0 100 100"><circle cx="50" cy="50" r="40" /></svg>',
            'circle-bold': '<svg viewBox="0 0 100 100"><circle cx="50" cy="50" r="40" stroke-width="8"/></svg>',
            'rectangle': '<svg viewBox="0 0 100 100"><rect x="15" y="25" width="70" height="50" /></svg>',
            'square': '<svg viewBox="0 0 100 100"><rect x="20" y="20" width="60" height="60" /></svg>',
            'square-bold': '<svg viewBox="0 0 100 100"><rect x="15" y="15" width="70" height="70" stroke-width="8"/></svg>',
            'trapezoid': '<svg viewBox="0 0 100 100"><polygon points="20,30 80,30 70,70 30,70" /></svg>',
            'parallelogram': '<svg viewBox="0 0 100 100"><polygon points="25,25 75,25 65,75 15,75" /></svg>',
            'rhombus': '<svg viewBox="0 0 100 100"><polygon points="50,10 90,50 50,90 10,50" /></svg>',
            'heart': '<svg viewBox="0 0 100 100"><path d="M50,30 C30,10 0,20 20,50 C30,70 50,90 50,90 C50,90 70,70 80,50 C100,20 70,10 50,30 Z" /></svg>',
            'star': '<svg viewBox="0 0 100 100"><path d="M50,10 L61,39 L92,39 L67,59 L78,88 L50,70 L22,88 L33,59 L8,39 L39,39 Z" /></svg>',
            'cross': '<svg viewBox="0 0 100 100"><rect x="45" y="15" width="10" height="70" rx="2"/><rect x="15" y="45" width="70" height="10" rx="2"/></svg>',
            'oval': '<svg viewBox="0 0 100 100"><ellipse cx="50" cy="50" rx="40" ry="30" /></svg>',
            'pentagon': '<svg viewBox="0 0 100 100"><polygon points="50,10 90,35 75,85 25,85 10,35" /></svg>',
            'hexagon': '<svg viewBox="0 0 100 100"><polygon points="50,10 85,25 85,75 50,90 15,75 15,25" /></svg>',
            'octagon': '<svg viewBox="0 0 100 100"><polygon points="30,10 70,10 90,30 90,70 70,90 30,90 10,70 10,30" /></svg>'
        };

        // –¶–≤–µ—Ç–∞ –¥–ª—è —Ñ–∏–≥—É—Ä
        const shapeColors = {
            'triangle': '#FF6B6B',
            'circle': '#4ECDC4',
            'circle-bold': '#45B7D1',
            'rectangle': '#FFA07A',
            'square': '#FFD166',
            'square-bold': '#FFB347',
            'trapezoid': '#A1C181',
            'parallelogram': '#86BAA1',
            'rhombus': '#B388FF',
            'heart': '#FF9AA2',
            'star': '#FFD700',
            'cross': '#7FDBFF',
            'oval': '#C5A3FF',
            'pentagon': '#FF85A1',
            'hexagon': '#A0E7E5',
            'octagon': '#B5EAD7'
        };

        // –î–∞–Ω–Ω—ã–µ –¥–ª—è —É—Ä–æ–≤–Ω–µ–π
        const levels = [
            {
                title: "–ü—Ä–æ—Å—Ç—ã–µ —Ñ–∏–≥—É—Ä—ã",
                description: "–ù–∞—á–Ω–µ–º —Å –ø—Ä–æ—Å—Ç—ã—Ö —Ñ–æ—Ä–º - —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫, –∫—Ä—É–≥ –∏ –∫–≤–∞–¥—Ä–∞—Ç!",
                shapes: [
                    { type: 'triangle', name: '–¢—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫' },
                    { type: 'circle', name: '–ö—Ä—É–≥' },
                    { type: 'square', name: '–ö–≤–∞–¥—Ä–∞—Ç' }
                ]
            },
            {
                title: "–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–æ—Ä–º—ã",
                description: "–¢–µ–ø–µ—Ä—å –¥–æ–±–∞–≤–∏–º –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫ –∏ –æ–≤–∞–ª!",
                shapes: [
                    { type: 'rectangle', name: '–ü—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫' },
                    { type: 'oval', name: '–û–≤–∞–ª' },
                    { type: 'triangle', name: '–¢—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫' },
                    { type: 'circle', name: '–ö—Ä—É–≥' }
                ]
            },
            {
                title: "–ß–µ—Ç—ã—Ä–µ—Ö—É–≥–æ–ª—å–Ω–∏–∫–∏",
                description: "–†–∞–∑–ª–∏—á–∞–µ–º —Ä–∞–∑–Ω—ã–µ —á–µ—Ç—ã—Ä–µ—Ö—É–≥–æ–ª—å–Ω–∏–∫–∏!",
                shapes: [
                    { type: 'square', name: '–ö–≤–∞–¥—Ä–∞—Ç' },
                    { type: 'rectangle', name: '–ü—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫' },
                    { type: 'trapezoid', name: '–¢—Ä–∞–ø–µ—Ü–∏—è' },
                    { type: 'parallelogram', name: '–ü–∞—Ä–∞–ª–ª–µ–ª–æ–≥—Ä–∞–º–º' },
                    { type: 'rhombus', name: '–†–æ–º–±' }
                ]
            },
            {
                title: "–†–∞–∑–Ω—ã–µ —Ñ–æ—Ä–º—ã",
                description: "–¢–µ–ø–µ—Ä—å –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã–µ –∏ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–µ —Ñ–∏–≥—É—Ä—ã!",
                shapes: [
                    { type: 'heart', name: '–°–µ—Ä–¥—Ü–µ' },
                    { type: 'star', name: '–ó–≤–µ–∑–¥–∞' },
                    { type: 'cross', name: '–ö—Ä–µ—Å—Ç' },
                    { type: 'oval', name: '–û–≤–∞–ª' },
                    { type: 'rhombus', name: '–†–æ–º–±' }
                ]
            },
            {
                title: "–°–ª–æ–∂–Ω—ã–µ —Ñ–∏–≥—É—Ä—ã",
                description: "–ü–æ–ø—Ä–æ–±—É–π —Ä–∞–∑–ª–∏—á–∏—Ç—å –ø–æ—Ö–æ–∂–∏–µ —Ñ–∏–≥—É—Ä—ã!",
                shapes: [
                    { type: 'pentagon', name: '–ü—è—Ç–∏—É–≥–æ–ª—å–Ω–∏–∫' },
                    { type: 'hexagon', name: '–®–µ—Å—Ç–∏—É–≥–æ–ª—å–Ω–∏–∫' },
                    { type: 'octagon', name: '–í–æ—Å—å–º–∏—É–≥–æ–ª—å–Ω–∏–∫' },
                    { type: 'circle-bold', name: '–ö—Ä—É–≥' },
                    { type: 'square-bold', name: '–ö–≤–∞–¥—Ä–∞—Ç' }
                ]
            },
            {
                title: "–§–∏–Ω–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å",
                description: "–°–∞–º—ã–π —Å–ª–æ–∂–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å! –°–º–æ–∂–µ—à—å —Å–ø—Ä–∞–≤–∏—Ç—å—Å—è?",
                shapes: [
                    { type: 'trapezoid', name: '–¢—Ä–∞–ø–µ—Ü–∏—è' },
                    { type: 'parallelogram', name: '–ü–∞—Ä–∞–ª–ª–µ–ª–æ–≥—Ä–∞–º–º' },
                    { type: 'rhombus', name: '–†–æ–º–±' },
                    { type: 'pentagon', name: '–ü—è—Ç–∏—É–≥–æ–ª—å–Ω–∏–∫' },
                    { type: 'hexagon', name: '–®–µ—Å—Ç–∏—É–≥–æ–ª—å–Ω–∏–∫' },
                    { type: 'octagon', name: '–í–æ—Å—å–º–∏—É–≥–æ–ª—å–Ω–∏–∫' }
                ]
            }
        ];

        document.addEventListener('DOMContentLoaded', () => {
            const shapesContainer = document.getElementById('shapes');
            const slotsContainer = document.getElementById('slots');
            const message = document.getElementById('message');
            const resetBtn = document.getElementById('resetBtn');
            const nextLevelBtn = document.getElementById('nextLevelBtn');
            const levelSelector = document.getElementById('levelSelector');
            const levelCompleteText = document.getElementById('levelCompleteText');
            const levelDescription = document.getElementById('levelDescription');
            
            // –ê—É–¥–∏–æ —ç–ª–µ–º–µ–Ω—Ç—ã
            const successSound = document.getElementById('successSound');
            const winSound = document.getElementById('winSound');
            const errorSound = document.getElementById('errorSound');
            const dropSound = document.getElementById('dropSound');
            
            let currentLevel = 0;
            let draggedShape = null;
            
            // –ü–æ–ª—É—á–∞–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å –∏–∑ localStorage
            let completedLevels = JSON.parse(localStorage.getItem('completedLevels')) || [];
            if (completedLevels.length === 0) {
                // –ü–µ—Ä–≤—ã–π —É—Ä–æ–≤–µ–Ω—å –≤—Å–µ–≥–¥–∞ –¥–æ—Å—Ç—É–ø–µ–Ω
                completedLevels.push(0);
                localStorage.setItem('completedLevels', JSON.stringify(completedLevels));
            }
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã
            initLevelSelector();
            initLevel(currentLevel);
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫
            resetBtn.addEventListener('click', () => {
                initLevel(currentLevel);
                message.classList.remove('show');
                nextLevelBtn.disabled = true;
            });
            
            nextLevelBtn.addEventListener('click', () => {
                if (currentLevel < levels.length - 1) {
                    // –î–æ–±–∞–≤–ª—è–µ–º —Å–ª–µ–¥—É—é—â–∏–π —É—Ä–æ–≤–µ–Ω—å –≤ —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö
                    if (!completedLevels.includes(currentLevel + 1)) {
                        completedLevels.push(currentLevel + 1);
                        localStorage.setItem('completedLevels', JSON.stringify(completedLevels));
                    }
                    
                    currentLevel++;
                    initLevel(currentLevel);
                    message.classList.remove('show');
                    nextLevelBtn.disabled = true;
                    updateLevelButtons();
                }
            });
            
            function initLevelSelector() {
                levelSelector.innerHTML = '';
                levels.forEach((level, index) => {
                    const btn = document.createElement('button');
                    btn.className = `level-btn ${index === 0 ? 'active' : ''}`;
                    btn.textContent = `–£—Ä–æ–≤–µ–Ω—å ${index + 1}`;
                    btn.dataset.level = index;
                    
                    // –ë–ª–æ–∫–∏—Ä—É–µ–º —É—Ä–æ–≤–µ–Ω—å, –µ—Å–ª–∏ –æ–Ω –Ω–µ –ø—Ä–æ–π–¥–µ–Ω –∏ –Ω–µ –ø–µ—Ä–≤—ã–π
                    if (index > 0 && !completedLevels.includes(index)) {
                        btn.classList.add('locked');
                        btn.disabled = true;
                    }
                    
                    btn.addEventListener('click', () => {
                        if (btn.classList.contains('locked')) return;
                        
                        currentLevel = index;
                        initLevel(currentLevel);
                        message.classList.remove('show');
                        nextLevelBtn.disabled = true;
                        updateLevelButtons();
                    });
                    levelSelector.appendChild(btn);
                });
            }
            
            function updateLevelButtons() {
                document.querySelectorAll('.level-btn').forEach((btn, index) => {
                    btn.classList.toggle('active', index === currentLevel);
                    
                    // –†–∞–∑–±–ª–æ–∫–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É, –µ—Å–ª–∏ —É—Ä–æ–≤–µ–Ω—å –ø—Ä–æ–π–¥–µ–Ω
                    if (completedLevels.includes(index)) {
                        btn.classList.remove('locked');
                        btn.disabled = false;
                    }
                });
            }
            
            function initLevel(level) {
                // –û—á–∏—â–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
                shapesContainer.innerHTML = '';
                slotsContainer.innerHTML = '';
                
                const levelData = levels[level];
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –æ–ø–∏—Å–∞–Ω–∏–µ
                levelDescription.textContent = levelData.description;
                
                // –°–æ–∑–¥–∞–µ–º –∫–æ–ø–∏—é –º–∞—Å—Å–∏–≤–∞ —Ñ–∏–≥—É—Ä –∏ –ø–µ—Ä–µ–º–µ—à–∏–≤–∞–µ–º –µ–≥–æ
                const shuffledShapes = [...levelData.shapes];
                shuffleArray(shuffledShapes);
                
                // –°–æ–∑–¥–∞–µ–º —Ñ–∏–≥—É—Ä—ã –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ —É—Ä–æ–≤–Ω—è
                shuffledShapes.forEach((shape, index) => {
                    // –°–æ–∑–¥–∞–µ–º —Ñ–∏–≥—É—Ä—É
                    const shapeElement = document.createElement('div');
                    shapeElement.className = 'shape';
                    shapeElement.draggable = true;
                    shapeElement.dataset.shape = shape.type;
                    shapeElement.title = shape.name;
                    shapeElement.innerHTML = shapeSVGs[shape.type];
                    shapeElement.style.color = shapeColors[shape.type] || '#4a6baf'; // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ü–≤–µ—Ç —Ñ–∏–≥—É—Ä—ã
                    
                    // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
                    shapeElement.addEventListener('dragstart', dragStart);
                    shapeElement.addEventListener('dragend', dragEnd);
                    shapeElement.addEventListener('touchstart', touchStart, { passive: false });
                    shapeElement.addEventListener('touchmove', touchMove, { passive: false });
                    shapeElement.addEventListener('touchend', touchEnd);
                    
                    shapesContainer.appendChild(shapeElement);
                });
                
                // –°–æ–∑–¥–∞–µ–º —Å–ª–æ—Ç—ã –≤ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ
                levelData.shapes.forEach((shape, index) => {
                    // –°–æ–∑–¥–∞–µ–º —Å–ª–æ—Ç –¥–ª—è —Ñ–∏–≥—É—Ä—ã
                    const slotElement = document.createElement('div');
                    slotElement.className = 'slot';
                    slotElement.dataset.shape = shape.type;
                    slotElement.dataset.shapeName = shape.name;
                    
                    // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
                    slotElement.addEventListener('dragover', dragOver);
                    slotElement.addEventListener('dragenter', dragEnter);
                    slotElement.addEventListener('dragleave', dragLeave);
                    slotElement.addEventListener('drop', drop);
                    slotElement.addEventListener('touchmove', touchMoveSlot, { passive: false });
                    slotElement.addEventListener('touchend', touchEndSlot);
                    
                    slotsContainer.appendChild(slotElement);
                });
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω—É–∂–Ω–æ –ª–∏ –æ—Ç–∫–ª—é—á–∞—Ç—å –∫–Ω–æ–ø–∫—É —Å–ª–µ–¥—É—é—â–µ–≥–æ —É—Ä–æ–≤–Ω—è
                if (currentLevel === levels.length - 1) {
                    nextLevelBtn.disabled = true;
                    levelCompleteText.textContent = "–¢—ã –ø—Ä–æ—à—ë–ª –≤—Å–µ —É—Ä–æ–≤–Ω–∏! –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! üèÜ";
                } else {
                    levelCompleteText.textContent = "–ü–µ—Ä–µ—Ö–æ–¥–∏ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π —É—Ä–æ–≤–µ–Ω—å!";
                }
            }
            
            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–µ—Ä–µ–º–µ—à–∏–≤–∞–Ω–∏—è –º–∞—Å—Å–∏–≤–∞
            function shuffleArray(array) {
                for (let i = array.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [array[i], array[j]] = [array[j], array[i]];
                }
                return array;
            }
            
            function dragStart(e) {
                draggedShape = this;
                this.classList.add('dragging');
                e.dataTransfer.setData('text/plain', this.dataset.shape);
                e.dataTransfer.effectAllowed = 'move';
                
                if (e.type === 'touchstart') {
                    e.preventDefault();
                    this.style.position = 'absolute';
                    this.style.zIndex = '1000';
                }
            }
            
            function touchStart(e) {
                dragStart.call(this, e);
                return false;
            }
            
            function touchMove(e) {
                if (!draggedShape) return;
                e.preventDefault();
                const touch = e.touches[0];
                draggedShape.style.left = (touch.clientX - 45) + 'px';
                draggedShape.style.top = (touch.clientY - 45) + 'px';
            }
            
            function touchEnd() {
                if (!draggedShape) return;
                this.classList.remove('dragging');
                this.style.position = '';
                this.style.zIndex = '';
                this.style.left = '';
                this.style.top = '';
                draggedShape = null;
            }
            
            function touchMoveSlot(e) {
                e.preventDefault();
            }
            
            function touchEndSlot(e) {
                if (!draggedShape) return;
                
                const touch = e.changedTouches[0];
                const element = document.elementFromPoint(touch.clientX, touch.clientY);
                
                if (element && element.classList.contains('slot')) {
                    drop.call(element, new Event('drop'));
                }
                
                touchEnd.call(draggedShape);
            }
            
            function dragEnd() {
                this.classList.remove('dragging');
                draggedShape = null;
            }
            
            function dragOver(e) {
                e.preventDefault();
                e.dataTransfer.dropEffect = 'move';
            }
            
            function dragEnter(e) {
                e.preventDefault();
                const slotShape = this.dataset.shape;
                const draggedShapeType = draggedShape.dataset.shape;
                
                if (slotShape === draggedShapeType) {
                    this.classList.add('highlight');
                }
            }
            
            function dragLeave() {
                this.classList.remove('highlight');
                this.classList.remove('incorrect');
            }
            
            function drop(e) {
                e.preventDefault();
                this.classList.remove('highlight');
                
                const slotShape = this.dataset.shape;
                const draggedShapeType = draggedShape.dataset.shape;
                
                if (slotShape === draggedShapeType) {
                    if (this.children.length === 0) {
                        const clonedShape = draggedShape.cloneNode(true);
                        clonedShape.style.display = 'flex';
                        clonedShape.draggable = false;
                        clonedShape.classList.remove('dragging');
                        this.innerHTML = '';
                        this.appendChild(clonedShape);
                        this.classList.add('correct');
                        
                        // –í–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º –∑–≤—É–∫ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è
                        dropSound.currentTime = 0;
                        dropSound.play();
                        
                        // –î–µ–ª–∞–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—É—é —Ñ–∏–≥—É—Ä—É –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ–π
                        draggedShape.style.opacity = '0.3';
                        draggedShape.style.pointerEvents = 'none';
                        
                        checkCompletion();
                    }
                } else {
                    this.classList.add('incorrect');
                    errorSound.currentTime = 0;
                    errorSound.play();
                    setTimeout(() => {
                        this.classList.remove('incorrect');
                    }, 500);
                }
            }
            
            function checkCompletion() {
                const correctSlots = document.querySelectorAll('.slot.correct');
                const allSlots = document.querySelectorAll('.slot');
                
                if (correctSlots.length === allSlots.length) {
                    setTimeout(() => {
                        message.classList.add('show');
                        
                        // –î–æ–±–∞–≤–ª—è–µ–º —Ç–µ–∫—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å –≤ —Å–ø–∏—Å–æ–∫ –ø—Ä–æ–π–¥–µ–Ω–Ω—ã—Ö, –µ—Å–ª–∏ –µ–≥–æ —Ç–∞–º –µ—â–µ –Ω–µ—Ç
                        if (!completedLevels.includes(currentLevel)) {
                            completedLevels.push(currentLevel);
                            localStorage.setItem('completedLevels', JSON.stringify(completedLevels));
                        }
                        
                        // –†–∞–∑–±–ª–æ–∫–∏—Ä—É–µ–º —Å–ª–µ–¥—É—é—â–∏–π —É—Ä–æ–≤–µ–Ω—å
                        if (currentLevel < levels.length - 1 && !completedLevels.includes(currentLevel + 1)) {
                            completedLevels.push(currentLevel + 1);
                            localStorage.setItem('completedLevels', JSON.stringify(completedLevels));
                        }
                        
                        // –û–±–Ω–æ–≤–ª—è–µ–º –∫–Ω–æ–ø–∫–∏ —É—Ä–æ–≤–Ω–µ–π
                        updateLevelButtons();
                        
                        // –í–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º –∑–≤—É–∫ –ø–æ–±–µ–¥—ã
                        if (currentLevel === levels.length - 1) {
                            winSound.currentTime = 0;
                            winSound.play();
                        } else {
                            successSound.currentTime = 0;
                            successSound.play();
                            nextLevelBtn.disabled = false;
                        }
                    }, 500);
                }
            }
        });
    </script>
</body>
</html>